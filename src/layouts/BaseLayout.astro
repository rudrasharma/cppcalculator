---
import '../styles/global.css';
import ContactButton from '../components/ContactButton';

const { title, description } = Astro.props;
const currentPath = Astro.url.pathname;

const TABS = [
  { id: 'cpp', href: '/cpp-oas-calculator', label: 'CPP & OAS', color: 'text-indigo-600', bg: 'bg-indigo-50' },
  { id: 'parental', href: '/parental-leave-calculator', label: 'Mat. Leave', color: 'text-rose-600', bg: 'bg-rose-50' },
  { id: 'ccb', href: '/child-benefit-calculator', label: 'Family Cash', color: 'text-emerald-600', bg: 'bg-emerald-50' },
  { id: 'budget', href: '/grocery-inflation-calculator', label: 'Budget Def.', color: 'text-amber-600', bg: 'bg-amber-50' },
];
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover" />
    <title>{title} | LoonieFi</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/android-chrome-192x192.png" />
  </head>

  <body class="bg-slate-50 text-slate-800 font-sans min-h-screen flex flex-col antialiased selection:bg-indigo-100 selection:text-indigo-900">
    
    {/* --- SHARED HEADER --- */}
    <nav class="bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
            <a href="/" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
                <img src="/android-chrome-192x192.png" alt="LoonieFi" class="h-8 w-8 rounded-full shadow-sm" />
                <div class="text-lg font-bold tracking-tight">
                    <span class="text-amber-500">Loonie</span><span class="text-slate-900">Fi</span>
                </div>
            </a>

            {/* DESKTOP TABS */}
            <div class="hidden md:flex gap-1 bg-slate-100/50 p-1 rounded-xl border border-slate-200/50">
                {TABS.map((tab) => (
                    <a 
                        href={tab.href}
                        class={`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${
                            currentPath === tab.href 
                            ? 'bg-white text-slate-900 shadow-sm ring-1 ring-black/5' 
                            : 'text-slate-500 hover:text-slate-700 hover:bg-slate-200/50'
                        }`}
                    >
                        {tab.label}
                    </a>
                ))}
            </div>
        </div>
    </nav>

    {/* --- MAIN CONTENT SLOT --- */}
    <div class="flex-grow flex flex-col">
        <slot />
    </div>

    {/* --- SHARED FOOTER --- */}
    <footer class="bg-slate-50 border-t border-slate-200 pb-32 md:pb-20 pt-10 mt-auto">
      <div class="max-w-5xl mx-auto px-6 text-center">
        
        {/* FOOTER LINKS */}
        <div class="flex flex-wrap justify-center items-center gap-x-6 gap-y-2 mb-8 font-medium text-sm">
            <a href="/blog" class="text-indigo-600 hover:text-indigo-800 transition-colors flex items-center gap-2 group">
                <span class="bg-indigo-100 text-indigo-700 p-1 rounded group-hover:bg-indigo-200 transition-colors">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                </span>
                Guides & Blog
            </a>

            <span class="text-slate-300 hidden sm:inline">•</span>

            {/* PRIVACY TOOLTIP */}
            <div class="relative group inline-block cursor-help">
                <span class="text-slate-400 border-b border-dotted border-slate-300">Privacy First</span>
                <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 text-center z-50 pointer-events-none">
                    All calculations are performed locally in your browser. No data is sent to our servers.
                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"></div>
                </div>
            </div>

            <span class="text-slate-300 hidden sm:inline">•</span>

            <ContactButton client:visible />
        </div>

        {/* DISCLAIMER SECTION (RESTORED) */}
        <div class="max-w-2xl mx-auto mb-6">
            <p class="text-[11px] leading-relaxed text-slate-400">
                <strong>Disclaimer:</strong> This tool provides estimates for informational purposes only and does not constitute financial, legal, or tax advice. While we strive for accuracy using official formulas, your actual government benefits (CPP, OAS, CCB) may vary based on official assessments. Please consult a professional financial planner or Service Canada for your specific situation.
            </p>
        </div>

        {/* COPYRIGHT */}
        <div class="flex flex-col gap-2 border-t border-slate-100 pt-6">
            <p class="text-xs text-slate-400">
                © {new Date().getFullYear()} LoonieFi. All rights reserved.
            </p>
            <p class="text-[10px] text-slate-300 uppercase tracking-wider">
                Made with <span class="text-rose-400">♥</span> in Waterloo, ON
            </p>
        </div>
      </div>
    </footer>

  </body>
</html>