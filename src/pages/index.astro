---
/**
 * @typedef {Object} Tool
 * @property {string} href - URL path
 * @property {string} label - Display label
 * @property {string} color - Text color class
 * @property {string} bg - Background color class
 * @property {string} iconSvg - SVG path string
 * @property {string} description - Tool description
 */

import BaseLayout from '../layouts/BaseLayout.astro';

interface Props {}

const TOOLS = [
  { 
    href: '/cpp-oas-calculator', 
    label: 'CPP & OAS', 
    color: 'text-indigo-600', 
    bg: 'bg-indigo-50',
    iconSvg: `<path d="M12 20v-10m6 10v-16m-12 16v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`,
    description: 'Calculate your future monthly income from government pensions.'
  },
  { 
    href: '/parental-leave-calculator', 
    label: 'Mat. Leave', 
    color: 'text-rose-600', 
    bg: 'bg-rose-50',
    iconSvg: `<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M8 14s1.5 2 4 2 4-2 4-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/><line x1="9" y1="9" x2="9.01" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><line x1="15" y1="9" x2="15.01" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>`,
    description: 'Estimate your EI weekly payments and total leave duration.'
  },
  { 
    href: '/child-benefit-calculator', 
    label: 'Family Cash', 
    color: 'text-emerald-600', 
    bg: 'bg-emerald-50',
    iconSvg: `<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/><polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>`,
    description: 'Maximize your Child Benefits and quarterly tax rebates.'
  },
  { 
    href: '/grocery-inflation-calculator', 
    label: 'Budget Def.', 
    color: 'text-amber-600', 
    bg: 'bg-amber-50',
    iconSvg: `<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>`,
    description: 'Protect your spending power against rising Canadian food costs.'
  },
];

const title = "Canadian Financial & Family Calculators | LoonieFi";
const description = "Free, privacy-first calculators for CPP, Child Benefits, Parental Leave, and Inflation. Calculate your Canadian government benefits and plan your finances.";
const canonicalURL = new URL('/', Astro.site || Astro.url.origin);

// Schema.org structured data for homepage
const homepageSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "LoonieFi",
  "url": canonicalURL.toString(),
  "description": description,
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": `${canonicalURL.toString()}calculator?q={search_term_string}`
    },
    "query-input": "required name=search_term_string"
  }
};

const softwareSchema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "LoonieFi Financial Calculators",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "CAD"
  },
  "featureList": TOOLS.map(tool => tool.description)
};
---

<BaseLayout title={title} description={description}>
  <script type="application/ld+json" set:html={JSON.stringify(homepageSchema)} />
  <script type="application/ld+json" set:html={JSON.stringify(softwareSchema)} />
  
  <main class="max-w-6xl mx-auto px-6 py-12 md:py-20 animate-fade-in text-center flex flex-col min-h-[60vh]">
      
    {/* HERO SECTION */}
    <header class="mb-12 md:mb-16">
      <h1 class="text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight leading-tight">
        What are we planning <br class="hidden md:block" /> for <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-amber-500 italic">today?</span>
      </h1>
      <p class="text-lg text-slate-600 max-w-xl mx-auto font-medium">
         Select a tool below to get instant, privacy-first estimates of your Canadian government benefits and purchasing power.
      </p>
    </header>

    {/* TOOLS GRID */}
    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-20" aria-label="Available calculators">
      {TOOLS.map((tool) => (
        <article>
          <a 
            href={tool.href} 
            class="group relative flex flex-col items-start p-8 bg-white border border-slate-200 rounded-[2.5rem] transition-all duration-300 hover:border-transparent hover:shadow-[0_20px_50px_rgba(0,0,0,0.08)] hover:-translate-y-2 text-left"
            aria-label={`${tool.label} calculator: ${tool.description}`}
          >
            {/* ICON BOX */}
            <div class={`p-4 rounded-2xl mb-6 transition-transform group-hover:scale-110 group-hover:rotate-3 ${tool.bg} ${tool.color}`} aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" set:html={tool.iconSvg} aria-hidden="true" />
            </div>

            <h2 class="text-xl font-black text-slate-900 mb-2">{tool.label}</h2>
            <p class="text-slate-500 mb-8 text-sm leading-relaxed font-medium">{tool.description}</p>
            
            <div class="mt-auto flex items-center font-bold text-slate-900 group-hover:text-indigo-600 transition-colors">
              Start Calculating 
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" aria-hidden="true">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </a>
        </article>
      ))}
    </section>
  </main>
</BaseLayout>
