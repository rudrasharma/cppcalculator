---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { CPP_SCENARIOS } from '../../../data/seo-scenarios';

const title = "Browse Retirement Scenarios: CPP, OAS & GIS | LoonieFi";
const description = "Find your specific retirement situation: Newcomers, Early Retirees, Low Income estimates, and more. Pre-filled calculator scenarios for Canadian retirement planning.";
const canonicalURL = new URL('/calculator/cpp-oas/browse', Astro.site || Astro.url.origin);

// Schema.org structured data
const browseSchema = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": title,
  "description": description,
  "url": canonicalURL.toString(),
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": CPP_SCENARIOS.length,
    "itemListElement": CPP_SCENARIOS.map((scene, index) => ({
      "@type": "ListItem",
      "position": index + 1,
      "item": {
        "@type": "WebPage",
        "name": scene.label,
        "description": scene.desc,
        "url": new URL(`/calculator/cpp-oas/${scene.slug}`, Astro.site || Astro.url.origin).toString()
      }
    }))
  }
};
---

<BaseLayout title={title} description={description}>
  <script type="application/ld+json" set:html={JSON.stringify(browseSchema)} />
  
  <main>
    <section class="max-w-5xl mx-auto px-4 py-12">
      <header class="text-center mb-16">
        <h1 class="text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight">
          Retirement Scenarios
        </h1>
        <p class="text-lg text-slate-600">Select a situation that matches yours to see a pre-filled estimate.</p>
      </header>
    
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" role="list">
        {CPP_SCENARIOS.map((scene) => (
          <article role="listitem">
            <a 
              href={`/calculator/cpp-oas/${scene.slug}`}
              class="group bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:border-indigo-600 hover:shadow-xl hover:-translate-y-1 transition-all text-left flex flex-col h-full"
              aria-label={`View ${scene.label} retirement scenario`}
            >
            <div class="mb-4">
                <span class="text-[10px] font-black uppercase tracking-widest text-slate-400 bg-slate-50 px-2 py-1 rounded-md group-hover:bg-indigo-50 group-hover:text-indigo-500 transition-colors">
                    {scene.age < 65 ? 'Early' : scene.age > 65 ? 'Deferred' : 'Standard'}
                </span>
            </div>
            <h2 class="text-lg font-bold text-slate-900 mb-3 group-hover:text-indigo-600 transition-colors leading-tight">
                {scene.label}
            </h2>
            <p class="text-slate-500 text-sm mb-6 flex-grow leading-relaxed">
                {scene.desc}
            </p>
            <div class="flex items-center gap-2 text-xs font-bold text-slate-400 border-t border-slate-100 pt-4 mt-auto">
                <span>{scene.years} Yrs Residence</span>
                <span class="w-1 h-1 rounded-full bg-slate-300"></span>
                <span>${parseInt(scene.income)/1000}k Income</span>
            </div>
            </a>
          </article>
        ))}
      </div>
    </section>
  </main>
</BaseLayout>